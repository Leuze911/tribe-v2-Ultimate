# TRIBE v2 - E2E Test: Login Flow
# Tests basic email/password login functionality

appId: com.tribe.app
---

# Test: Successful login with valid credentials
- launchApp:
    clearState: true

# Verify we're on the login screen
- assertVisible: "Tribe"
- assertVisible: "Se connecter"

# Test 1: Fill in credentials using testIDs
- tapOn:
    id: "email-input"
- inputText: "test@tribe.sn"

- tapOn:
    id: "password-input"
- inputText: "password123"

# Hide keyboard before tapping login
- hideKeyboard

# Submit login
- tapOn:
    id: "login-button"

# Wait for navigation to map screen
- extendedWaitUntil:
    visible: "Rechercher un lieu..."
    timeout: 10000

# Verify we're on the map screen (FAB button visible)
- assertVisible:
    id: "add-poi-button"

---
# Test: Login with invalid credentials
- launchApp:
    clearState: true

- assertVisible: "Tribe"

- tapOn:
    id: "email-input"
- inputText: "invalid@email.com"

- tapOn:
    id: "password-input"
- inputText: "wrongpassword"

- tapOn:
    id: "login-button"

# Should show error alert
- extendedWaitUntil:
    visible: "Erreur"
    timeout: 5000

---
# Test: Navigate to register screen
- launchApp:
    clearState: true

- assertVisible: "Tribe"
- assertVisible: "Pas encore de compte ?"

- tapOn:
    id: "register-link"

# Should be on register screen
- extendedWaitUntil:
    visible: "Cr√©er un compte"
    timeout: 3000
